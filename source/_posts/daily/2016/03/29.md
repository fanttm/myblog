title: 2016-03-29（星期二）
date: 2016-03-29 20:49:29
updated: 2016-03-29 20:49:29
comments: 
tags:
- 中医
- crontab
categories:
- daily report

---

今天在家待了一天，好像是重感冒了，并发了咽炎，昨晚开始同时服用了感冒灵颗粒和蒲地蓝消炎片，感觉有些效果，所以今天依照处方服用了多次。如果能够完全治好，那么后续可以考虑采用相同的方案，相对于抗生素的方式来说，蒲地蓝消炎片温和很多。

虽然在家，还是把部门计划使用的spark调查向前推进了一些，使用spark-shell进行了交互式的操作，也使用了spark-submit实现了python代码的作业提交执行。

下午昏昏沉沉从2点睡到了4点，起床后已经4点半了，还是惦记着要继续《HTML5权威指南》和《深入理解bootstrap》的学习，继续了“第6章 HTML5元素背景知识”的学习，bootstrap没有什么进展。

接下来，为家里准备了晚餐，有油菜、马铃薯、鳕鱼豆腐，红烧马铃薯做的越来越好了（生抽+红烧酱油+少量糖），深受大家喜欢。

当天最大收获就是在晚上了，搞定了困扰我许久一直没有去好好处理的一个技术问题，就是crontab任务执行时，如何加载环境变量，从而避免发生登录状态下可以正常执行，但是crontab中无法执行的情况。最终发现了两个解决办法：

+ 第一种方法，在任务脚本执行前先运行 ```. ~/.bashrc``` （特别需要注意的是，这个.bashrc脚本中一开始就说明了该脚本不会在非登录情况下执行，If not running interactively, don't do anything）

+ 第二种方法，在crontab中直接指定脚本采用login方式执行，代码如下，注意其中的```-lc```

```
* * * * * /bin/bash -lc '/opt/hexo/auto_deploy.sh' >> /opt/hexo/deploy.log 2>&1
```
