title: HBASE基础
date: 2016-05-13 17:35:11
updated: 2016-05-13 17:35:13
comments:
tags:
- hbase
categories:
- 

---

## HBASE和Cassandra区别

Hbase更加适合于数据仓库、大型数据的处理和分析（如进行Web页面的索引等），而Cassandra则更适合于实时事务处理和提供交互型数据

Cassandra做的还不够好的一件事情就是MapReduce！对于不精通此项技术同学简单的解释一句，这是一个用于并行处理大量数据的系统，比如从上百万从网络上抓取的页面提取统计信息。MapReduce和相关系统，比如Pig和Hive可以和HBase一起良好协作，因为它使用HDFS来存储数据，这些系统也是设计用来使用HDFS的。如果你需要进行这样的数据处理和分析的话，HBase可能是你目前的最佳选择。

## HBASE查询模式

HBase的查询实现只提供两种方式：

+ 按指定RowKey获取唯一一条记录，get方法（org.apache.hadoop.hbase.client.Get）
+ 按指定的条件获取一批记录，scan方法（org.apache.hadoop.hbase.client.Scan）


实现条件查询功能使用的就是scan方式，scan在使用时有以下几点值得注意：

+ scan可以通过setCaching与setBatch方法提高速度（以空间换时间）；
+ scan可以通过setStartRow与setEndRow来限定范围。范围越小，性能越高。
  通过巧妙的RowKey设计使我们批量获取记录集合中的元素挨在一起（应该在同一个Region下），可以在遍历结果时获得很好的性能。
+ scan可以通过setFilter方法添加过滤器，这也是分页、多条件查询的基础。




HBase增加了随机存取层，是HDFS缺失的部分，是对Hadoop的理想补充。

HBase用于开发的安装建议使用单机部署，如果使用伪分布式部署，每次启动或运行shell时会报出zookeeper相关的错误

HBase使用表作为顶级结构来存储数据，写数据到HBase，就是写数据到表。

HBase使用put存储数据，使用get、scan读取数据。

HBase可以存储每个数据单元的多个时间版本，默认版本数3个。




### HBase数据模型

+ 表（table）
  HBase用表来组织数据，表名是字符串。
+ 行（row）
  在表里，数据按照行存储。行由行键唯一标识，行键没有数据类型。
+ 列族（column family）
  行里的数据按照列族分组。影响到HBase的物理存放，必须在事前定义，并且不轻易修改。表中每行拥有相同的列族，行不必在每个列族里存放数据，列族的名称也是字符串。
+ 列限定符（column qualifier）
  列族里的数据通过列限定符或列来定位。列限定符不必事先定义，列限定符不必在不同行之间保持一致，列限定符没有数据类型，用字符串表示。
+ 单元（cell）
  行键、列族和列限定符一起确定一个单元，单元里存储的值成为单元值，没有数据类型。
+ 时间版本（version）
  单元值有时间版本，用时间戳标识。

> HBase = 无模式数据库，半结构化数据库
> HBase不能实施关系约束，不支持多行事务

过滤器可以应用到行键、列限定符和单元值（不包括列族），可以组合使用多个过滤器，过滤器允许对数据分页进行处理，限制扫描器返回的行数等等。

列值递增（原子操作）？
单行操作是原子性的，给定行的多个写操作，总是以每个写操作为整体彼此独立的。
行间操作不是原子性的。

HBase是一种专门为半结构化数据和水平可扩展性设计的数据库，是无模式数据库，也是无类型数据库，把所有数据不加解释地按照字节数组（Byte[]）存储。有5个基本命令用来访问HBase中的数据，即Get、Put、Delete、Scan和Increment。基于非行键值查询HBase的唯一办法是通过带过滤器的扫描。